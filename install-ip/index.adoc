---
permalink: install-ip/index.html
sidebar: sidebar
keywords: 
summary: ''
---
= MetroClusterÂ® IP Installation and Configuration Guide
:icons: font
:imagesdir: ../media/

* xref:concept_deciding_whether_to_use_this_guide_mcc_ip_installation_and_configuration_guide.adoc[Deciding whether to use this guide]
* link:concept_preparing_for_the_mcc_installation.md#concept_preparing_for_the_mcc_installation[Preparing for the MetroCluster installation]
 ** link:concept_preparing_for_the_mcc_installation.md#concept_differences_between_the_ontap_mcc_configurations[Differences between the ONTAP MetroCluster configurations]
  *** link:concept_preparing_for_the_mcc_installation.md#concept_access_to_remote_storage_in_mcc_ip_configurations[Access to remote storage in MetroCluster IP configurations]
 ** link:concept_preparing_for_the_mcc_installation.md#concept_considerations_for_using_ontap_mediator_or_mcc_tiebreaker[Considerations for using ONTAP Mediator or MetroCluster Tiebreaker]
  *** link:concept_preparing_for_the_mcc_installation.md#concept_ontap_mediator_and_third_party_appliances_and_applications[Interoperability of ONTAP Mediator with other applications and appliances]
  *** link:concept_preparing_for_the_mcc_installation.md#concept_how_the_ontap_mediator_supports_automatic_unplanned_switchover[How the ONTAP Mediator supports automatic unplanned switchover]
 ** link:concept_preparing_for_the_mcc_installation.md#concept_considerations_for_mcc_ip_addresses_and_configuration_mcc_ip[Considerations for MetroCluster IP configuration]
 ** link:concept_preparing_for_the_mcc_installation.md#concept_considerations_for_automatic_drive_assignment_and_adp_systems_in_ontap_9_4_and_later[Considerations for automatic drive assignment and ADP systems in ONTAP 9.4 and later]
  *** link:concept_preparing_for_the_mcc_installation.md#concept_adp_and_disk_assignment_differences_by_platform_model[ADP and disk assignment differences by system in MetroCluster IP configurations]
 ** link:concept_preparing_for_the_mcc_installation.md#concept_considerations_for_using_all_san_array_systems_in_mcc_configurations[Considerations for using All SAN Array systems in MetroCluster configurations]
 ** link:concept_preparing_for_the_mcc_installation.md#concept_considerations_for_configuring_cluster_peering[Considerations for configuring cluster peering]
  *** link:concept_preparing_for_the_mcc_installation.md#reference_prerequisites_for_cluster_peering[Prerequisites for cluster peering]
  *** link:concept_preparing_for_the_mcc_installation.md#concept_considerations_when_using_dedicated_ports[Considerations when using dedicated ports]
  *** link:concept_preparing_for_the_mcc_installation.md#concept_considerations_when_sharing_data_ports[Considerations when sharing data ports]
 ** link:concept_preparing_for_the_mcc_installation.md#reference_considerations_for_isls_mcc_ip[Considerations for ISLs]
 ** link:concept_preparing_for_the_mcc_installation.md#concept_considerations_for_sharing_private_layer_2_networks_mcc_ip[Considerations for sharing private layer 2 networks]
  *** link:concept_preparing_for_the_mcc_installation.md#concept_mcc_isl_requirements_in_shared_networks[MetroCluster ISL requirements in shared networks]
  *** link:concept_preparing_for_the_mcc_installation.md#concept_isl_cabling_requirements[ISL cabling requirements]
  *** link:concept_preparing_for_the_mcc_installation.md#concept_required_settings_on_intermediate_switches[Required settings on intermediate switches]
  *** link:concept_preparing_for_the_mcc_installation.md#concept_examples_of_mcc_network_topologies[Examples of MetroCluster network topologies]
 ** link:concept_preparing_for_the_mcc_installation.md#reference_considerations_for_using_mcc_compliant_switches[Considerations for using MetroCluster compliant switches]
 ** link:concept_preparing_for_the_mcc_installation.md#concept_considerations_for_using_tdm_xwdm_equipment_with_mcc_ip_configurations[Considerations for using TDM/xWDM and encryption equipment with MetroCluster IP configurations]
 ** link:concept_preparing_for_the_mcc_installation.md#concept_considerations_when_using_unmirrored_aggregates[Considerations when using unmirrored aggregates]
 ** link:concept_preparing_for_the_mcc_installation.md#concept_considerations_for_firewall_usage_at_mcc_sites[Considerations for firewall usage at MetroCluster sites]
 ** link:concept_preparing_for_the_mcc_installation.md#concept_preconfigured_settings_for_new_mcc_systems_from_the_factory[Preconfigured settings for new MetroCluster systems from the factory]
  *** link:concept_preparing_for_the_mcc_installation.md#reference_hardware_setup_checklist[Hardware setup checklist]
* xref:task_configuring_the_mcc_hardware_components_mcc_ip.adoc[Configuring the MetroCluster hardware components]
 ** link:concept_parts_of_an_ip_mcc_configuration_mcc_ip.md#concept_parts_of_an_ip_mcc_configuration_mcc_ip[Parts of a MetroCluster IP configuration]
  *** link:concept_parts_of_an_ip_mcc_configuration_mcc_ip.md#concept_illustration_of_the_local_ha_pairs_in_a_mcc_configuration[Illustration of the local HA pairs in a MetroCluster configuration]
  *** link:concept_parts_of_an_ip_mcc_configuration_mcc_ip.md#concept_illustration_of_the_mcc_ip_and_cluster_network[Illustration of the MetroCluster IP and cluster interconnect network]
  *** link:concept_parts_of_an_ip_mcc_configuration_mcc_ip.md#concept_cluster_peering_network_mcc[Illustration of the cluster peering network]
 ** xref:concept_required_mcc_ip_components_and_naming_guidelines_mcc_ip.adoc[Required MetroCluster IP components and naming conventions]
 ** link:task_installing_and_cabling_the_mcc_components.md#task_installing_and_cabling_the_mcc_components[Installing and cabling MetroCluster components]
  *** link:task_installing_and_cabling_the_mcc_components.md#task_racking_the_hardware_components_mcc_fabric_and_ip[Racking the hardware components]
  *** link:task_installing_and_cabling_the_mcc_components.md#task_cabling_the_ip_switches_mcc_ip[Cabling the IP switches]
   **** link:task_installing_and_cabling_the_mcc_components.md#concept_using_the_port_tables_with_the_rcf_generator_or_multiple_mcc_configurations[Using the port tables with the RcfFileGenerator tool or multiple MetroCluster configurations]
   **** link:task_installing_and_cabling_the_mcc_components.md#reference_new_format_cisco_3132q_v_mcc_ip_port_assignments_for_aff_a800_aff_a320_aff_a700_or_fas9000_systems[Platform port assignments for Cisco 3132Q-V switches]
   **** link:task_installing_and_cabling_the_mcc_components.md#reference_new_format_mcc_ip_port_assignments_for_cisco_3232c_or_cisco_9336c_switches[Platform port assignments for Cisco 3232C or Cisco 9336C switches]
   **** link:task_installing_and_cabling_the_mcc_components.md#reference_new_format_bes_mcc_ip_port_usage_for_broadcom_supported_bes_53248_with_aff_a250_aff_a220_and_fas2750_systems[Platform port assignments for Broadcom supported BES-53248 IP switches]
  *** link:task_installing_and_cabling_the_mcc_components.md#task_cabling_the_cluster_peering_connections[Cabling the cluster peering connections]
  *** link:task_installing_and_cabling_the_mcc_components.md#task_cabling_the_management_and_data_connections[Cabling the management and data connections]
  *** link:task_installing_and_cabling_the_mcc_components.md#task_configuring_the_ip_switches_choice_topic[Configuring the IP switches]
   **** link:task_installing_and_cabling_the_mcc_components.md#task_configuring_broadcom_ip_switches_mcc_ip[Configuring Broadcom IP switches]
    ***** link:task_installing_and_cabling_the_mcc_components.md#task_resetting_the_broadcom_ip_switch_to_factory_defaults[Resetting the Broadcom IP switch to factory defaults]
    ***** link:task_installing_and_cabling_the_mcc_components.md#task_downloading_and_installing_the_switch_efos_software[Downloading and installing the Broadcom switch EFOS software]
    ***** link:task_installing_and_cabling_the_mcc_components.md#task_downloading_and_installing_the_broadcom_rcf_files[Downloading and installing the Broadcom RCF files]
   **** link:task_installing_and_cabling_the_mcc_components.md#task_configuring_cisco_ip_switches_mcc_ip[Configuring Cisco IP switches]
    ***** link:task_installing_and_cabling_the_mcc_components.md#task_resetting_the_cisco_ip_switch_to_factory_defaults[Resetting the Cisco IP switch to factory defaults]
    ***** link:task_installing_and_cabling_the_mcc_components.md#task_downloading_and_installing_the_cisco_ip_switch_software[Downloading and installing the Cisco switch NX-OS software]
    ***** link:task_installing_and_cabling_the_mcc_components.md#task_downloading_and_installing_the_cisco_ip_switch_rcf_files[Downloading and installing the Cisco IP RCF files]
    ***** link:task_installing_and_cabling_the_mcc_components.md#concept_configuring_macsec_encryption_on_cisco_9336c_switches[Configuring MACsec encryption on CISCO 9336C switches]
     ****** link:task_installing_and_cabling_the_mcc_components.md#concept_licensing_requirements_for_macsec[Licensing requirements for MACsec]
     ****** link:task_installing_and_cabling_the_mcc_components.md#task_enabling_cisco_macsec_encryption_wan_isls_in_mcc_ip_configurations[Enabling Cisco MACsec Encryption WAN ISLs in MetroCluster IP configurations]
     ****** link:task_installing_and_cabling_the_mcc_components.md#task_disabling_cisco_macsec_encryption_wan_isls_in_mcc_ip_configurations[Disabling Cisco MACsec Encryption WAN ISLs in MetroCluster IP configurations]
     ****** link:task_installing_and_cabling_the_mcc_components.md#task_configuring_a_macsec_keychain_and_keys[Configuring a MACsec key chain and keys]
     ****** link:task_installing_and_cabling_the_mcc_components.md#task_configuring_a_macsec_policy[Configuring a MACsec policy]
     ****** link:task_installing_and_cabling_the_mcc_components.md#task_verifying_the_macsec_configuration[Verifying the MACsec configuration]
     ****** link:task_installing_and_cabling_the_mcc_components.md#task_configuring_a_macsec_fallback_key_on_a_wan_isl_port[Configuring a MACsec fallback key on a WAN ISL port]
    ***** link:task_installing_and_cabling_the_mcc_components.md#task_setting_forward_error_correction_for_platforms_using_25_gbps_connectivity[Setting Forward Error Correction for and systems using 25-Gbps connectivity]
* link:concept_configuring_the_mcc_software_in_ontap.md#concept_configuring_the_mcc_software_in_ontap[Configuring the MetroCluster software in ONTAP]
 ** link:concept_configuring_the_mcc_software_in_ontap.md#task_gathering_required_information_mcc_s_w_setup[Gathering required information]
  *** link:concept_configuring_the_mcc_software_in_ontap.md#reference_ip_network_information_worksheet_for_site_a[IP network information worksheet for site A]
  *** link:concept_configuring_the_mcc_software_in_ontap.md#reference_ip_network_information_worksheet_for_site_b[IP network information worksheet for site B]
 ** link:concept_configuring_the_mcc_software_in_ontap.md#concept_similarities_and_differences_between_regular_cluster_and_mcc_configurations[Similarities and differences between standard cluster and MetroCluster configurations]
 ** link:concept_configuring_the_mcc_software_in_ontap.md#task_restoring_system_defaults_on_a_controller_module[Restoring system defaults on a controller module]
 ** link:concept_configuring_the_mcc_software_in_ontap.md#task_verifying_the_ha_config_state_of_components_mcc_ip[Verifying the ha-config state of components]
 ** link:concept_configuring_the_mcc_software_in_ontap.md#task_manually_assigning_drives_to_pool0_choice_topic_mcc_ip[Manually assigning drives to pool 0]
  *** link:concept_configuring_the_mcc_software_in_ontap.md#task_manually_assigning_drives_for_pool_0_ontap_9_4_and_later[Manually assigning drives for pool 0 (ONTAP 9.4 and later)]
  *** link:concept_configuring_the_mcc_software_in_ontap.md#task_manually_assigning_drives_for_pool_0_ontap_9_3[Manually assigning drives for pool 0 (ONTAP 9.3)]
 ** link:concept_configuring_the_mcc_software_in_ontap.md#task_setting_up_ontap_mcc_ip[Setting up ONTAP]
 ** link:concept_configuring_the_mcc_software_in_ontap.md#task_configuring_the_clusters_into_a_mcc_configuration[Configuring the clusters into a MetroCluster configuration]
  *** link:concept_configuring_the_mcc_software_in_ontap.md#task_disabling_automatic_disk_assignment_if_doing_manual_assignment[Disabling automatic drive assignment (if doing manual assignment in ONTAP 9.4)]
  *** link:concept_configuring_the_mcc_software_in_ontap.md#task_verifying_disk_assignment_of_pool_0_disks_mcc_ip[Verifying drive assignment of pool 0 drives]
  *** link:concept_configuring_the_mcc_software_in_ontap.md#task_peering_the_clusters_mcc[Peering the clusters]
   **** link:concept_configuring_the_mcc_software_in_ontap.md#task_configuring_intercluster_lifs[Configuring intercluster LIFs]
    ***** link:concept_configuring_the_mcc_software_in_ontap.md#task_configuring_intercluster_lifs_to_use_dedicated_intercluster_ports[Configuring intercluster LIFs on dedicated ports]
    ***** link:concept_configuring_the_mcc_software_in_ontap.md#task_configuring_intercluster_lifs_to_share_data_ports[Configuring intercluster LIFs on shared data ports]
   **** link:concept_configuring_the_mcc_software_in_ontap.md#task_creating_a_cluster_peer_relationship_ontap_9_3[Creating a cluster peer relationship]
  *** link:concept_configuring_the_mcc_software_in_ontap.md#task_creating_the_dr_group_mcc_ip[Creating the DR group]
  *** link:concept_configuring_the_mcc_software_in_ontap.md#task_configuring_and_connecting_the_mcc_ip_interfaces[Configuring and connecting the MetroCluster IP interfaces]
  *** link:concept_configuring_the_mcc_software_in_ontap.md#task_verifying_or_manually_performing_pool_1_drives_assignment_choice_topic_mcc_ip[Verifying or manually performing pool 1 drives assignment]
   **** link:concept_configuring_the_mcc_software_in_ontap.md#task_verifying_disk_assignment_for_pool1_disks_mcc_ip[Verifying disk assignment for pool 1 disks]
   **** link:concept_configuring_the_mcc_software_in_ontap.md#task_manually_assigning_disks_for_pool_1_ontap_9_4_or_later_mcc_ip[Manually assigning drives for pool 1 (ONTAP 9.4 or later)]
   **** link:concept_configuring_the_mcc_software_in_ontap.md#task_manually_assigning_disks_for_pool_1_ontap_9_3_mcc_ip[Manually assigning disks for pool 1 (ONTAP 9.3)]
  *** link:concept_configuring_the_mcc_software_in_ontap.md#task_enabling_automatic_disk_assignment_if_doing_manual_assignment[Enabling automatic drive assignment in ONTAP 9.4]
  *** link:concept_configuring_the_mcc_software_in_ontap.md#task_mirroring_the_root_aggregates_mcc[Mirroring the root aggregates]
  *** link:concept_configuring_the_mcc_software_in_ontap.md#task_creating_a_mirrored_data_aggregate_on_each_node_mcc[Creating a mirrored data aggregate on each node]
  *** link:concept_configuring_the_mcc_software_in_ontap.md#task_implementing_the_mcc_configuration_mcc_configure[Implementing the MetroCluster configuration]
  *** link:concept_configuring_the_mcc_software_in_ontap.md#task_creating_unmirrored_data_aggregates_mcc[Creating unmirrored data aggregates]
  *** link:concept_configuring_the_mcc_software_in_ontap.md#task_checking_the_mcc_configuration[Checking the MetroCluster configuration]
  *** link:concept_configuring_the_mcc_software_in_ontap.md#task_completing_ontap_configuration[Completing ONTAP configuration]
 ** link:concept_configuring_the_mcc_software_in_ontap.md#task_verifying_switchover_healing_and_switchback[Verifying switchover, healing, and switchback]
 ** link:concept_configuring_the_mcc_software_in_ontap.md#task_configuring_the_mcc_tiebreaker_or_ontap_mediator_software[Configuring the MetroCluster Tiebreaker or ONTAP Mediator software]
 ** link:concept_configuring_the_mcc_software_in_ontap.md#task_setting_the_destination_for_configuration_backup_files_mcc[Protecting configuration backup files]
* xref:concept_considerations_for_using_virtual_ip_and_border_gateway_protocol_with_a_mcc_configuration.adoc[Considerations for using virtual IP and Border Gateway Protocol with a MetroCluster configuration]
* link:concept_configuring_the_ontap_mediator_for_unplanned_automatic_switchover.md#concept_configuring_the_ontap_mediator_for_unplanned_automatic_switchover[Configuring the ONTAP Mediator service for unplanned automatic switchover]
 ** link:concept_configuring_the_ontap_mediator_for_unplanned_automatic_switchover.md#task_installing_and_configuring_the_ontap_mediator_software[Installing and configuring the ONTAP Mediator service]
  *** link:concept_configuring_the_ontap_mediator_for_unplanned_automatic_switchover.md#concept_network_requirements_for_using_mediator_in_a_mcc_configurations[Network requirements for using Mediator in a MetroCluster configuration]
  *** link:concept_configuring_the_ontap_mediator_for_unplanned_automatic_switchover.md#reference_firewall_requirements_for_ontap_mediator[Firewall requirements for ONTAP Mediator]
  *** link:concept_configuring_the_ontap_mediator_for_unplanned_automatic_switchover.md#concept_guidelines_for_upgrading_the_ontap_mediator[Guidelines for upgrading the ONTAP Mediator in a MetroCluster configuration]
  *** link:concept_configuring_the_ontap_mediator_for_unplanned_automatic_switchover.md#task_installing_or_upgrading_the_ontap_mediator_service[Installing or upgrading the ONTAP Mediator service]
  *** link:concept_configuring_the_ontap_mediator_for_unplanned_automatic_switchover.md#task_configuring_ontap_mediator_utility_with_a_mcc_ip_configuration[Configuring the ONTAP Mediator service from a MetroCluster IP configuration]
 ** link:concept_configuring_the_ontap_mediator_for_unplanned_automatic_switchover.md#task_connecting_a_mcc_configuration_to_a_different_ontap_mediator_instance[Connecting a MetroCluster configuration to a different ONTAP Mediator instance]
 ** link:concept_configuring_the_ontap_mediator_for_unplanned_automatic_switchover.md#task_changing_the_ontap_mediator_password[Changing the ONTAP Mediator password]
 ** link:concept_configuring_the_ontap_mediator_for_unplanned_automatic_switchover.md#task_changing_the_ontap_mediator_username[Changing the ONTAP Mediator user name]
 ** link:concept_configuring_the_ontap_mediator_for_unplanned_automatic_switchover.md#task_uninstalling_ontap_mediator_service[Uninstalling the ONTAP Mediator service]
* link:task_testing_the_mcc_configuration.md#task_testing_the_mcc_configuration[Testing the MetroCluster configuration]
 ** link:task_testing_the_mcc_configuration.md#task_verifying_negotiated_switchover[Verifying negotiated switchover]
 ** link:task_testing_the_mcc_configuration.md#task_verifying_healing_and_manual_switchback[Verifying healing and manual switchback]
 ** link:task_testing_the_mcc_configuration.md#task_verifying_operation_after_power_line_disruption[Verifying operation after power line disruption]
 ** link:task_testing_the_mcc_configuration.md#task_verifying_operation_after_loss_of_a_single_storage_shelf[Verifying operation after loss of a single storage shelf]
* xref:concept_considerations_when_removing_mcc_configurations.adoc[Considerations when removing MetroCluster configurations]
* link:concept_considerations_when_using_ontap_in_a_mcc_configuration.md#concept_considerations_when_using_ontap_in_a_mcc_configuration[Considerations when using ONTAP in a MetroCluster configuration]
 ** link:concept_considerations_when_using_ontap_in_a_mcc_configuration.md#concept_mcc_operations_in_ontap_system_manager[MetroCluster operations in ONTAP System Manager]
 ** link:concept_considerations_when_using_ontap_in_a_mcc_configuration.md#concept_flexcache_support_in_a_mcc_configuration[FlexCache support in a MetroCluster configuration]
 ** link:concept_considerations_when_using_ontap_in_a_mcc_configuration.md#concept_fabricpool_support_in_a_mcc_configuration[FabricPool support in MetroCluster configurations]
 ** link:concept_considerations_when_using_ontap_in_a_mcc_configuration.md#concept_flexgroup_support_in_a_mcc_configuration[FlexGroup support in MetroCluster configurations]
 ** link:concept_considerations_when_using_ontap_in_a_mcc_configuration.md#concept_job_schedules_in_a_mcc_configuration[Job schedules in a MetroCluster configuration]
 ** link:concept_considerations_when_using_ontap_in_a_mcc_configuration.md#concept_cluster_peering_to_a_third_cluster_from_the_mcc_sites[Cluster peering from the MetroCluster site to a third cluster]
 ** link:concept_considerations_when_using_ontap_in_a_mcc_configuration.md#concept_ldap_client_configuration_replication_in_a_mcc_configuration[LDAP client configuration replication in a MetroCluster configuration]
 ** link:concept_considerations_when_using_ontap_in_a_mcc_configuration.md#concept_networking_and_lif_creation_guidelines_for_mcc_configurations[Networking and LIF creation guidelines for MetroCluster configurations]
  *** link:concept_considerations_when_using_ontap_in_a_mcc_configuration.md#concept_ipspace_object_and_subnet_configuration_requirements[IPspace object replication and subnet configuration requirements]
  *** link:concept_considerations_when_using_ontap_in_a_mcc_configuration.md#concept_requirements_for_lif_creation_in_a_mcc_configuration[Requirements for LIF creation in a MetroCluster configuration]
  *** link:concept_considerations_when_using_ontap_in_a_mcc_configuration.md#concept_lif_replication_and_placement_requirements[LIF replication and placement requirements and issues]
  *** link:concept_considerations_when_using_ontap_in_a_mcc_configuration.md#concept_volume_creation_on_the_root_aggregate[Volume creation on a root aggregate]
 ** link:concept_considerations_when_using_ontap_in_a_mcc_configuration.md#concept_svm_disaster_recovery_in_a_mcc_configuration[SVM disaster recovery in a MetroCluster configuration]
  *** link:concept_considerations_when_using_ontap_in_a_mcc_configuration.md#concept_svm_resynchronization_at_a_disaster_recovery_site[SVM resynchronization at a disaster recovery site]
 ** link:concept_considerations_when_using_ontap_in_a_mcc_configuration.md#concept_output_for_storage_aggregate_plex_show_after_a_mcc_switchover[Output for the storage aggregate plex show command is indeterminate after a MetroCluster switchover]
 ** link:concept_considerations_when_using_ontap_in_a_mcc_configuration.md#task_modifying_volumes_to_set_nvfail_in_case_of_switchover[Modifying volumes to set the NVFAIL flag in case of switchover]
* xref:reference_where_to_find_additional_information_mccip_icg.adoc[Where to find additional information]
* xref:reference_copyright_and_trademark.adoc[Copyright, trademark, and machine translation]
 ** xref:reference_copyright.adoc[Copyright]
 ** xref:reference_trademark.adoc[Trademark]
 ** xref:generic_machine_translation_disclaimer.adoc[Machine translation]
