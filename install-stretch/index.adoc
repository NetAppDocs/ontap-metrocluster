---
permalink: install-stretch/index.html
sidebar: sidebar
keywords: 
summary: ''
---
= Stretch MetroClusterÂ® Installation and Configuration Guide
:icons: font
:imagesdir: ../media/

* xref:concept_deciding_whether_to_use_this_guide_stretch_metrocluster_installation_and_configuration_guide.adoc[Deciding whether to use this guide]
* link:concept_preparing_for_the_metrocluster_installation.md#concept_preparing_for_the_metrocluster_installation[Preparing for the MetroCluster installation]
 ** link:concept_preparing_for_the_metrocluster_installation.md#concept_differences_between_the_ontap_metrocluster_configurations[Differences between the ONTAP MetroCluster configurations]
 ** link:concept_preparing_for_the_metrocluster_installation.md#concept_considerations_for_using_all_san_array_systems_in_metrocluster_configurations[Considerations for using All SAN Array systems in MetroCluster configurations]
 ** link:concept_preparing_for_the_metrocluster_installation.md#concept_considerations_for_configuring_cluster_peering[Considerations for configuring cluster peering]
  *** link:concept_preparing_for_the_metrocluster_installation.md#reference_prerequisites_for_cluster_peering[Prerequisites for cluster peering]
  *** link:concept_preparing_for_the_metrocluster_installation.md#concept_considerations_when_using_dedicated_ports[Considerations when using dedicated ports]
  *** link:concept_preparing_for_the_metrocluster_installation.md#concept_considerations_when_sharing_data_ports[Considerations when sharing data ports]
 ** link:concept_preparing_for_the_metrocluster_installation.md#concept_considerations_when_using_unmirrored_aggregates[Considerations when using unmirrored aggregates]
 ** link:concept_preparing_for_the_metrocluster_installation.md#concept_considerations_for_firewall_usage_at_metrocluster_sites[Considerations for firewall usage at MetroCluster sites]
 ** link:concept_preparing_for_the_metrocluster_installation.md#concept_preconfigured_settings_for_new_metrocluster_systems_from_the_factory[Preconfigured settings for new MetroCluster systems from the factory]
  *** link:concept_preparing_for_the_metrocluster_installation.md#reference_hardware_setup_checklist[Hardware setup checklist]
* xref:concept_choosing_the_correct_installation_procedure_for_your_configuration_mcc_install.adoc[Choosing the correct installation procedure for your configuration]
* xref:task_configuring_the_metrocluster_hardware_components_2_node_stretch_sas.adoc[Cabling a two-node SAS-attached stretch MetroCluster configuration]
 ** xref:concept_parts_of_a_two_node_sas_attached_stretch_metrocluster_configuration.adoc[Parts of a two-node SAS-attached stretch MetroCluster configuration]
 ** xref:concept_required_metrocluster_components_and_example_names_for_two_node_sas_attached_stretch_configurations_mcc.adoc[Required MetroCluster hardware components and naming guidelines for two-node SAS-attached stretch configurations]
 ** xref:reference_sas_optical_mc_configuring_a_stretch_metrocluster_system_with_sas_disk_shelves_and_sas_optical_cables.adoc[Installing and cabling MetroCluster components for two-node SAS-attached stretch configurations]
  *** xref:task_racking_the_hardware_components_2_node_stretch_sas.adoc[Racking the hardware components]
  *** xref:task_cabling_the_controllers_to_each_other_and_the_storage_shelves.adoc[Cabling the controllers to each other and the storage shelves]
  *** xref:task_cabling_the_cluster_peering_connections.adoc[Cabling the cluster peering connections]
  *** xref:task_cabling_the_management_and_data_connections.adoc[Cabling the management and data connections]
* xref:task_configuring_the_metrocluster_hardware_components_2_node_stretch_atto.adoc[Cabling a two-node bridge-attached stretch MetroCluster configuration]
 ** xref:concept_parts_of_a_two_node_metrocluster_configuration_using_fc_to_sas_bridges.adoc[Parts of a two-node bridge-attached stretch MetroCluster configuration]
 ** xref:concept_required_metrocluster_components_and_naming_conventions_for_two_node_bridge_attached_stretch_configurations_mcc.adoc[Required MetroCluster hardware components and naming conventions for two-node bridge-attached stretch configurations]
 ** xref:reference_information_gathering_worksheet_for_fc_to_sas_bridges_2_node_atto.adoc[Information gathering worksheet for FC-to-SAS bridges]
 ** xref:task_installing_and_cabling_the_metrocluster_components.adoc[Installing and cabling MetroCluster components]
  *** xref:task_racking_the_hardware_components_mcc_2_node_stretch_atto.adoc[Racking the hardware components]
  *** xref:task_cabling_the_fc_vi_adapters_to_the_partner_controller_2_node_stretch_atto.adoc[Cabling the controllers to each other]
  *** xref:task_cabling_the_cluster_peering_connections.adoc[Cabling the cluster peering connections]
  *** xref:task_cabling_the_management_and_data_connections.adoc[Cabling the management and data connections]
 ** xref:task_fb_new_install.adoc[Installing FC-to-SAS bridges and SAS disk shelves]
  *** xref:concept_in_band_management_of_the_fc_to_sas_bridges.adoc[In-band management of the FC-to-SAS bridges]
  *** xref:task_fb_new_install_preparing.adoc[Preparing for the installation]
  *** xref:task_installing_the_fc_to_sas_bridge_and_sas_shelves_fb_new_install_parent.adoc[Installing the FC-to-SAS bridge and SAS shelves]
   **** xref:task_enabling_ip_port_access_on_the_fibrebridge_7600n_bridge_guides.adoc[Enabling IP port access on the FibreBridge 7600N bridge if necessary]
   **** xref:task_configuring_the_fc_to_sas_bridges_fb_new_install_configuring.adoc[Configuring the FC-to-SAS bridges]
   **** xref:task_fb_new_install_cabling.adoc[Cabling disk shelves to the bridges]
    ***** xref:task_cabling_a_fibrebridge_7600n_or_7500n_bridge_with_disk_shelves_using_iom12_modules_sas3.adoc[Cabling a FibreBridge 7600N or 7500N bridge with disk shelves using IOM12 modules]
    ***** xref:task_cabling_a_fibrebridge_7600n_or_7500n_bridge_fb_new_install_cabling_7500_pangolin.adoc[Cabling a FibreBridge 7600N or 7500N bridge with shelves using IOM6 or IOM3 modules]
    ***** xref:task_fb_new_install_cabling_6500_armadillo.adoc[Cabling a FibreBridge 6500N bridge with disk shelves using IOM6 or IOM3 modules]
   **** xref:task_fb_new_install_cabling_the_fc_to_sas_bridges_to_the_controller_module_in_a_two_node_bridge_attached_configuration.adoc[Cabling the FC-to-SAS bridges to the controller module in a two-node bridge-attached MetroCluster configuration]
* link:concept_configuring_the_metrocluster_software_in_ontap.md#concept_configuring_the_metrocluster_software_in_ontap[Configuring the MetroCluster software in ONTAP]
 ** link:concept_configuring_the_metrocluster_software_in_ontap.md#task_gathering_required_information_mcc_s_w_setup[Gathering required information]
  *** link:concept_configuring_the_metrocluster_software_in_ontap.md#reference_ip_network_information_worksheet_for_site_a[IP network information worksheet for site A]
  *** link:concept_configuring_the_metrocluster_software_in_ontap.md#reference_ip_network_information_worksheet_for_site_b[IP network information worksheet for site B]
 ** link:concept_configuring_the_metrocluster_software_in_ontap.md#concept_similarities_and_differences_between_regular_cluster_and_metrocluster_configurations[Similarities and differences between standard cluster and MetroCluster configurations]
 ** link:concept_configuring_the_metrocluster_software_in_ontap.md#task_restoring_system_defaults_on_a_controller_module[Restoring system defaults and configuring the HBA type on a controller module]
 ** link:concept_configuring_the_metrocluster_software_in_ontap.md#task_configuring_fc_vi_ports_on_a_x1132a_r6_quad_port_card[Configuring FC-VI ports on a X1132A-R6 quad-port card on FAS8020 systems]
 ** link:concept_configuring_the_metrocluster_software_in_ontap.md#task_verifying_disk_assignment_in_maintenance_mode_in_a_two_node_configuration_metrocluster[Verifying disk assignment in Maintenance mode in a two-node configuration]
 ** link:concept_configuring_the_metrocluster_software_in_ontap.md#task_verifying_the_ha_state_of_components_is_mcc_2n_in_maintenance_mode_mcc_stretch[Verifying the HA state of components]
 ** link:concept_configuring_the_metrocluster_software_in_ontap.md#task_setting_up_ontap_in_a_two_node_metrocluster_configuration_2_node_mcc[Setting up ONTAP in a two-node MetroCluster configuration]
 ** link:concept_configuring_the_metrocluster_software_in_ontap.md#task_configuring_the_clusters_into_a_metrocluster_configuration[Configuring the clusters into a MetroCluster configuration]
  *** link:concept_configuring_the_metrocluster_software_in_ontap.md#task_peering_the_clusters_metrocluster[Peering the clusters]
   **** link:concept_configuring_the_metrocluster_software_in_ontap.md#task_configuring_intercluster_lifs[Configuring intercluster LIFs]
    ***** link:concept_configuring_the_metrocluster_software_in_ontap.md#task_configuring_intercluster_lifs_to_use_dedicated_intercluster_ports[Configuring intercluster LIFs on dedicated ports]
    ***** link:concept_configuring_the_metrocluster_software_in_ontap.md#task_configuring_intercluster_lifs_to_share_data_ports[Configuring intercluster LIFs on shared data ports]
   **** link:concept_configuring_the_metrocluster_software_in_ontap.md#task_creating_a_cluster_peer_relationship_mcc_choice_task[Creating a cluster peer relationship]
    ***** link:concept_configuring_the_metrocluster_software_in_ontap.md#task_creating_a_cluster_peer_relationship_ontap_9_3[Creating a cluster peer relationship]
    ***** link:concept_configuring_the_metrocluster_software_in_ontap.md#task_creating_a_cluster_peer_relationship_ontap_9_2_and_earlier[Creating a cluster peer relationship (ONTAP 9.2 and earlier)]
  *** link:concept_configuring_the_metrocluster_software_in_ontap.md#task_mirroring_the_root_aggregates_mcc[Mirroring the root aggregates]
  *** link:concept_configuring_the_metrocluster_software_in_ontap.md#task_creating_a_mirrored_data_aggregate_on_each_node_metrocluster[Creating a mirrored data aggregate on each node]
  *** link:concept_configuring_the_metrocluster_software_in_ontap.md#task_creating_unmirrored_data_aggregates_metrocluster[Creating unmirrored data aggregates]
  *** link:concept_configuring_the_metrocluster_software_in_ontap.md#task_implementing_the_metrocluster_configuration_metrocluster_configure[Implementing the MetroCluster configuration]
  *** link:concept_configuring_the_metrocluster_software_in_ontap.md#task_configuring_snmpv3_and_disabling_unsecure_protocols[Configuring SNMPv3 in a MetroCluster configuration]
  *** link:concept_configuring_the_metrocluster_software_in_ontap.md#task_configuring_the_fc_to_sas_bridges_for_health_monitoring[Configuring FC-to-SAS bridges for health monitoring]
  *** link:concept_configuring_the_metrocluster_software_in_ontap.md#task_checking_the_metrocluster_configuration[Checking the MetroCluster configuration]
 ** link:concept_configuring_the_metrocluster_software_in_ontap.md#task_checking_for_metrocluster_configuration_errors_with_config_advisor[Checking for MetroCluster configuration errors with Config Advisor]
 ** link:concept_configuring_the_metrocluster_software_in_ontap.md#task_verifying_switchover_healing_and_switchback[Verifying switchover, healing, and switchback]
 ** link:concept_configuring_the_metrocluster_software_in_ontap.md#task_setting_the_destination_for_configuration_backup_files_metrocluster[Protecting configuration backup files]
* xref:concept_considerations_for_using_virtual_ip_and_border_gateway_protocol_with_a_metrocluster_configuration.adoc[Considerations for using virtual IP and Border Gateway Protocol with a MetroCluster configuration]
* link:task_testing_the_metrocluster_configuration.md#task_testing_the_metrocluster_configuration[Testing the MetroCluster configuration]
 ** link:task_testing_the_metrocluster_configuration.md#task_verifying_negotiated_switchover[Verifying negotiated switchover]
 ** link:task_testing_the_metrocluster_configuration.md#task_verifying_healing_and_manual_switchback[Verifying healing and manual switchback]
 ** link:task_testing_the_metrocluster_configuration.md#task_verifying_operation_after_loss_of_a_single_fc_to_sas_bridge[Loss of a single FC-to-SAS bridge]
 ** link:task_testing_the_metrocluster_configuration.md#task_verifying_operation_after_power_line_disruption[Verifying operation after power line disruption]
 ** link:task_testing_the_metrocluster_configuration.md#task_verifying_operation_after_loss_of_a_single_storage_shelf[Verifying operation after loss of a single storage shelf]
* xref:concept_stretch_metrocluster_configuration_with_array_luns.adoc[Connections in a stretch MetroCluster configurations with array LUNs]
 ** xref:reference_example_of_a_stretch_metrocluster_configuration_with_array_luns.adoc[Example of a stretch MetroCluster configuration with array LUNs]
 ** xref:reference_examples_of_two_node_stretch_metrocluster_configurations_with_disks_and_array_luns.adoc[Examples of two-node stretch MetroCluster configurations with disks and array LUNs]
 ** xref:reference_example_of_a_stretch_metrocluster_configuration_with_e_series_storage_arrays.adoc[Example of a stretch MetroCluster configuration with E-Series storage arrays]
* xref:concept_considerations_when_removing_metrocluster_configurations.adoc[Considerations when removing MetroCluster configurations]
* xref:concept_using_the_oncommand_management_tools_for_further_configuration_and_monitoring.adoc[Using the Active IQ Unified Manager and ONTAP System Manager for further configuration and monitoring]
 ** xref:task_synchronizing_the_system_time_using_ntp.adoc[Synchronizing the system time using NTP]
* link:concept_considerations_when_using_ontap_in_a_metrocluster_configuration.md#concept_considerations_when_using_ontap_in_a_metrocluster_configuration[Considerations when using ONTAP in a MetroCluster configuration]
 ** link:concept_considerations_when_using_ontap_in_a_metrocluster_configuration.md#concept_metrocluster_operations_in_ontap_system_manager[MetroCluster operations in ONTAP System Manager]
 ** link:concept_considerations_when_using_ontap_in_a_metrocluster_configuration.md#concept_flexcache_support_in_a_metrocluster_configuration[FlexCache support in a MetroCluster configuration]
 ** link:concept_considerations_when_using_ontap_in_a_metrocluster_configuration.md#concept_fabricpool_support_in_a_metrocluster_configuration[FabricPool support in MetroCluster configurations]
 ** link:concept_considerations_when_using_ontap_in_a_metrocluster_configuration.md#concept_flexgroup_support_in_a_metrocluster_configuration[FlexGroup support in MetroCluster configurations]
 ** link:concept_considerations_when_using_ontap_in_a_metrocluster_configuration.md#concept_job_schedules_in_a_metrocluster_configuration[Job schedules in a MetroCluster configuration]
 ** link:concept_considerations_when_using_ontap_in_a_metrocluster_configuration.md#concept_cluster_peering_to_a_third_cluster_from_the_metrocluster_sites[Cluster peering from the MetroCluster site to a third cluster]
 ** link:concept_considerations_when_using_ontap_in_a_metrocluster_configuration.md#concept_ldap_client_configuration_replication_in_a_metrocluster_configuration[LDAP client configuration replication in a MetroCluster configuration]
 ** link:concept_considerations_when_using_ontap_in_a_metrocluster_configuration.md#concept_networking_and_lif_creation_guidelines_for_metrocluster_configurations[Networking and LIF creation guidelines for MetroCluster configurations]
  *** link:concept_considerations_when_using_ontap_in_a_metrocluster_configuration.md#concept_ipspace_object_and_subnet_configuration_requirements[IPspace object replication and subnet configuration requirements]
  *** link:concept_considerations_when_using_ontap_in_a_metrocluster_configuration.md#concept_requirements_for_lif_creation_in_a_metrocluster_configuration[Requirements for LIF creation in a MetroCluster configuration]
  *** link:concept_considerations_when_using_ontap_in_a_metrocluster_configuration.md#concept_lif_replication_and_placement_requirements[LIF replication and placement requirements and issues]
  *** link:concept_considerations_when_using_ontap_in_a_metrocluster_configuration.md#concept_volume_creation_on_the_root_aggregate[Volume creation on a root aggregate]
 ** link:concept_considerations_when_using_ontap_in_a_metrocluster_configuration.md#concept_svm_disaster_recovery_in_a_metrocluster_configuration[SVM disaster recovery in a MetroCluster configuration]
  *** link:concept_considerations_when_using_ontap_in_a_metrocluster_configuration.md#concept_svm_resynchronization_at_a_disaster_recovery_site[SVM resynchronization at a disaster recovery site]
 ** link:concept_considerations_when_using_ontap_in_a_metrocluster_configuration.md#concept_output_for_disk_and_storage_shelf_show_commands_in_a_two_node_metrocluster_configuration[Output of the storage disk show and storage shelf show commands in a two-node stretch MetroCluster configuration]
 ** link:concept_considerations_when_using_ontap_in_a_metrocluster_configuration.md#concept_output_for_storage_aggregate_plex_show_after_a_metrocluster_switchover[Output for the storage aggregate plex show command is indeterminate after a MetroCluster switchover]
 ** link:concept_considerations_when_using_ontap_in_a_metrocluster_configuration.md#task_modifying_volumes_to_set_nvfail_in_case_of_switchover[Modifying volumes to set the NVFAIL flag in case of switchover]
* xref:task_upgrade_the_configuration_to_fabric_attached_metrocluster.adoc[Transitioning from a stretch to a fabric-attached MetroCluster configuration]
* xref:reference_where_to_find_additional_information_icg.adoc[Where to find additional information]
* xref:reference_copyright_and_trademark.adoc[Copyright, trademark, and machine translation]
 ** xref:reference_copyright.adoc[Copyright]
 ** xref:reference_trademark.adoc[Trademark]
 ** xref:generic_machine_translation_disclaimer.adoc[Machine translation]
