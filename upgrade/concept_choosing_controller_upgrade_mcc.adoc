---
permalink: upgrade/concept_choosing_controller_upgrade_mcc.html
sidebar: sidebar
keywords: metrocluster, upgrade, choose, upgrade, refresh, method
summary: 'The upgrade procedure you use depends on the platform model.'
---
= Choose a controller upgrade procedure
:icons: font
:imagesdir: ../media/

[.lead]
The controller upgrade procedure you use depends on the platform model and type of MetroCluster configuration.

In an upgrade procedure, the controllers are replaced with a
new controller model.
The storage shelf models are not upgraded.

* In switchover and switchback procedures, the MetroCluster switchover operation is used to provide
nondisruptive service to clients while the controller modules on the partner cluster are upgraded.

* In an ARL-based controller upgrade procedure, the aggregate relocation operations are used to
nondisruptively move data from the old configuration to the new, upgraded configuration.


== Choosing a procedure that uses the switchover and switchback process

Select your Current platform from the FC or IP table below. If the intersection of the Current platform row and Target platform column is blank, the upgrade is not supported.

=== MetroCluster IP controller upgrades

image::../media/metrocluster_ip_upgrade_table.PNG[]
* Note 1: For this upgrade use the procedure link:task_upgrade_A700_to_A900_in_a_four_node_mcc_ip_us_switchover_and_switchback.html[Upgrade controllers from AFF A700/FAS9000 to AFF A900/FAS9500 in a MetroCluster IP configuration using switchover and switchback (ONTAP 9.10.1 or later)]

=== MetroCluster FC controller upgrades

image::../media/metrocluster_fc_upgrade_table.PNG[]

* Note 1: Link to KB for 8020

* Note 2: Link KB if using ONTAP 9.10.1 or later (if using onboard FCVI ports) - link burt from KB

* Note 3: For this upgrade refer to*link:task_upgrade_A700_to_A900_in_a_four_node_mcc_fc_us_switchover_and_switchback.html[Upgrade controllers from AFF A700/FAS9000 to AFF A900/FAS9500 in a MetroCluster FC configuration using switchover and switchback (ONTAP 9.10.1 or later)]

[cols="2,1,1,2"]
|===

h| Upgrade method h| MetroCluster type h| ONTAP version h| Procedure

a|
Upgrade with 'system controller replace' commands
a|
FC
a|
9.10.1 and later
a|
link:task_upgrade_controllers_system_control_commands_in_a_four_node_mcc_fc.html[Link to procedure]
a|
Upgrade with 'system controller replace' commands (AFF A700 to AFF A900 only)
a|
IP
a|
9.10.1 and later
a|
link:task_upgrade_A700_to_A900_in_a_four_node_mcc_ip_us_switchover_and_switchback.html[Link to procedure]


a|
Manual upgrade with CLI commands
a|
FC
a|
9.8 and later
a|
link:task_upgrade_controllers_in_a_four_node_fc_mcc_us_switchover_and_switchback_mcc_fc_4n_cu.html[Link to procedure]

a|
Manual upgrade with CLI commands
a|
IP
a|
9.8 and later
a|
link:task_upgrade_controllers_in_a_four_node_ip_mcc_us_switchover_and_switchback_mcc_ip.html[Link to procedure]

|===

== Choosing a procedure using aggregate relocation

In an ARL-based controller upgrade procedure, the aggregate relocation operations are used to
nondisruptively move data from the old configuration to the new, upgraded configuration.

|===
h| Aggregate relocation h|  MetroCluster type h| ONTAP version h| Procedure

a|
Using `system controller replace` commands and swapping the controller module and NVM (upgrade from AFF A700 to AFF A900 only)
a|
FC
a|
9.10.1 and later
a|
https://docs.netapp.com/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/index.html[Link to procedure^]

a|
Using `system controller replace` commands
a|
FC
a|
9.8 and later
a|
https://docs.netapp.com/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/index.html[Link to procedure^]


a|
Using `system controller replace` commands
a|
FC
a|
9.5 through 9.7
a|
https://docs.netapp.com/us-en/ontap-systems-upgrade/upgrade-arl-auto/index.html[Link to procedure^]

a|
Using manual ARL commands
a|
FC
a|
9.8
a|
https://docs.netapp.com/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/index.html[Link to procedure^]

a|
Using manual ARL commands
a|
FC
a|
9.7 and earlier
a|
https://docs.netapp.com/us-en/ontap-systems-upgrade/upgrade-arl-manual/index.html[Link to procedure^]

|===


// BURT 1491888  August 8th, 2022
