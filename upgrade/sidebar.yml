section: upgrade
title: Upgrade or expand the MetroCluster configuration
url:  "/upgrade/index.html"
entries:
  - title: Choosing an upgrade or refresh method
    url: "/upgrade/concept_choosing_an_upgrade_method_mcc.html"
  - title: Upgrading controllers in a MetroCluster FC configuration using switchover and switchback
    url: "/upgrade/task_upgrade_controllers_in_a_four_node_fc_mcc_us_switchover_and_switchback_mcc_fc_4n_cu.html"
  - title: Using "system controller replace" commands to upgrade controllers in a MetroCluster FC configuration (ONTAP 9.10.1 or later)
    url: "/upgrade/task_upgrade_controllers_system_control_commands_in_a_four_node_mcc_fc.html"
  - title: Upgrading controllers in a MetroCluster IP configuration using switchover and switchback (ONTAP 9.8 and later)
    url: "/upgrade/task_upgrade_controllers_in_a_four_node_ip_mcc_us_switchover_and_switchback_mcc_ip.html"
  - title: Refreshing a four-node MetroCluster FC configuration
    url: "/upgrade/task_refresh_4n_mcc_fc.html"
  - title: Refreshing a four-node MetroCluster IP configuration (ONTAP 9.8 and later)
    url: "/upgrade/task_refresh_4n_mcc_ip.html"
  - title: Expanding a two-node MetroCluster FC configuration to a four-node configuration
    url: "/upgrade/task_expand_a_two_node_mcc_fc_configuration_to_a_four_node_fc_configuration_supertask.html"
    entries:
    - title: Verifying the state of the MetroCluster configuration
      url: "/upgrade/task_verify_the_state_of_the_mcc_configuration_mcc_expansion.html"
    - title: Sending a custom AutoSupport message before adding nodes to the MetroCluster configuration
      url: "/upgrade/task_send_a_custom_autosupport_message_before_add_nodes_to_the_mcc_configuration_2_node_to_4_node.html"
    - title: Zoning for the new controller ports when adding a controller module in a fabric-attached MetroCluster configuration
      url: "/upgrade/task_zone_for_the_new_controller_ports_in_a_fabric_attached_mcc_configuration_four_node_expansion.html"
    - title: Adding a new controller module to each cluster
      url: "/upgrade/task_add_a_new_controller_to_each_cluster_mcc_expansion.html"
      entries:
      - title: Preparing for the upgrade
        url: "/upgrade/task_prepare_for_the_upgrade_add_2nd_controller_to_create_ha_pair.html"
      - title: Clearing the configuration on a controller module
        url: "/upgrade/task_clear_the_configuration_on_a_controller_module_mcc.html"
      - title: Preparing cluster ports on an existing controller module
        url: "/upgrade/task_prepare_cluster_ports_on_the_exist_controller.html"
      - title: Preparing the netboot server to download the image
        url: "/upgrade/task_prepare_the_netboot_server_cluster_mode.html"
      - title: Setting the HA mode on the existing controller module
        url: "/upgrade/task_enable_the_ha_mode_on_the_exist_controller_mcc_when_add_a_2nd_controller.html"
      - title: Shutting down the existing controller module
        url: "/upgrade/task_shut_down_the_exist_controller_when_add_a_2nd_controller_in_c_mode.html"
      - title: Installing and cabling the new controller module
        url: "/upgrade/task_install_and_cable_the_new_controller.html"
        entries:
        - title: Cabling the new controller module&#8217;s FC-VI and HBA ports to the FC switches
          url: "/upgrade/task_cable_the_controller_module_s_fc_vi_hba_ports_to_the_fc_switches_controller_to_fc_sw.html"
        - title: Cabling the new controller module&#8217;s cluster peering connections
          url: "/upgrade/task_cable_the_cluster_peering_connections.html"
      - title: Powering up both controller modules and displaying the LOADER prompt
        url: "/upgrade/task_power_up_both_controller_modules_and_display_the_loader_prompt_2_node_mcc_expansion.html"
      - title: Changing the ha-config setting on the existing and new controller modules
        url: "/upgrade/task_change_the_ha_config_setts_mcc_add_a_2nd_controller.html"
      - title: Setting the partner system ID for both controller modules
        url: "/upgrade/task_set_the_partner_system_id_for_both_controller_modules.html"
      - title: Booting the existing controller module
        url: "/upgrade/task_boot_the_exist_controller_module.html"
      - title: Assigning disks to the new controller module
        url: "/upgrade/task_assign_disks_to_the_new_controller_mcc_expansion.html"
      - title: Netbooting and setting up ONTAP on the new controller module
        url: "/upgrade/task_netboot_and_set_up_ontap_on_the_new_controller_module_mcc.html"
      - title: Mirroring the root aggregate on the new controller
        url: "/upgrade/task_mirror_the_root_aggregates_mcc_expansion_procedure.html"
      - title: Configuring intercluster LIFs
        url: "/upgrade/task_configure_intercluster_lifs.html"
        entries:
        - title: Configuring intercluster LIFs on dedicated ports
          url: "/upgrade/task_configure_intercluster_lifs_to_use_dedicated_intercluster_ports.html"
        - title: Configuring intercluster LIFs on shared data ports
          url: "/upgrade/task_configure_intercluster_lifs_to_share_data_ports.html"
      - title: Creating a mirrored data aggregate on each node
        url: "/upgrade/task_create_a_mirrored_data_aggregate_on_each_node_mcc.html"
      - title: Installing licenses for the new controller module
        url: "/upgrade/task_install_licenses_on_the_new_controller_module_cluster_mode.html"
      - title: Creating unmirrored data aggregates
        url: "/upgrade/task_create_unmirrored_data_aggregates_mcc.html"
      - title: Installing the firmware after adding a controller module
        url: "/upgrade/task_install_firmware_after_add_a_controller_module.html"
    - title: Refreshing the MetroCluster configuration with new controllers
      url: "/upgrade/task_refresh_the_mcc_configuration_mcc_configure_refresh.html"
    - title: Enabling storage failover on both controller modules and enabling cluster HA
      url: "/upgrade/task_enable_storage_failover_both_controller_modules_and_set_cluster_ha.html"
    - title: Restarting the SVMs
      url: "/upgrade/task_restart_the_svms.html"
  - title: Expanding a four-node MetroCluster FC configuration to an eight-node configuration
    url: "/upgrade/task_expand_a_four_node_mcc_fc_configuration_to_an_eight_node_configuration.html"
    entries:
    - title: Determining the new cabling layout
      url: "/upgrade/task_determin_the_new_cable_layout_mcc_expansion.html"
    - title: Racking the new equipment
      url: "/upgrade/task_rack_the_new_equipment_mcc_expansion.html"
    - title: Verifying the health of the MetroCluster configuration
      url: "/upgrade/task_verify_the_health_of_the_mcc_configuration.html"
    - title: Checking for MetroCluster configuration errors with Config Advisor
      url: "/upgrade/task_check_for_mcc_configuration_errors_with_config_advisor.html"
    - title: Sending a custom AutoSupport message prior to adding nodes to the MetroCluster configuration
      url: "/upgrade/task_send_a_custom_autosupport_message_before_add_nodes_to_the_mcc_configuration.html"
    - title: Recabling and zoning a switch fabric for the new nodes
      url: "/upgrade/task_recable_and_zone_a_switch_fabric_mcc_expansion.html"
      entries:
      - title: Disconnecting the existing DR group from the fabric
        url: "/upgrade/task_disconnect_the_exist_dr_group_mcc_expansion.html"
      - title: Applying the RCF files and recabling the switches
        url: "/upgrade/task_apply_the_rcf_files_and_recable_the_switches.html"
    - title: Configuring ONTAP on the new controllers
      url: "/upgrade/task_configure_ontap_on_the_new_controllers_mcc_expansion.html"
      entries:
      - title: Clearing the configuration on a controller module
        url: "/upgrade/task_clear_the_configuration_on_a_controller_module_mcc.html"
      - title: Assigning disk ownership in AFF systems
        url: "/upgrade/task_assign_disk_ownership_in_aff_systems_mcc.html"
      - title: Assigning disk ownership in non-AFF systems
        url: "/upgrade/task_assign_disk_ownership_to_non_aff_systems_mcc.html"
      - title: Verifying the ha-config state of components
        url: "/upgrade/task_verify_that_the_ha_state_of_components_is_mcc_dr_smok_crater_or_mcc_expansion.html"
      - title: Booting the new controllers and joining them to the cluster
        url: "/upgrade/task_boot_the_new_controllers_and_join_them_to_the_cluster.html"
      - title: Configuring the clusters into a MetroCluster configuration
        url: "/upgrade/task_configure_the_clusters_into_a_mcc_configuration.html"
        entries:
        - title: Configuring intercluster LIFs
          url: "/upgrade/task_configure_intercluster_lifs.html"
          entries:
          - title: Configuring intercluster LIFs on dedicated ports
            url: "/upgrade/task_configure_intercluster_lifs_to_use_dedicated_intercluster_ports.html"
          - title: Configuring intercluster LIFs on shared data ports
            url: "/upgrade/task_configure_intercluster_lifs_to_share_data_ports.html"
        - title: Mirroring the root aggregates
          url: "/upgrade/task_mirror_the_root_aggregates_mcc.html"
        - title: Implementing the MetroCluster configuration
          url: "/upgrade/task_implement_the_mcc_configuration_mcc_refresh_mcc_expansion.html"
        - title: Creating a mirrored data aggregate on each node
          url: "/upgrade/task_create_a_mirrored_data_aggregate_on_each_node_mcc.html"
        - title: Configuring FC-to-SAS bridges for health monitoring
          url: "/upgrade/task_configure_the_fc_to_sas_bridges_for_health_monitor.html"
        - title: Moving a metadata volume in MetroCluster configurations
          url: "/upgrade/task_move_a_metadata_volume_in_mcc_configurations.html"
        - title: Checking the MetroCluster configuration
          url: "/upgrade/task_check_the_mcc_configuration.html"
    - title: Checking for MetroCluster configuration errors with Config Advisor
      url: "/upgrade/task_check_for_mcc_configuration_errors_with_config_advisor.html"
    - title: Sending a custom AutoSupport message after to adding nodes to the MetroCluster configuration
      url: "/upgrade/task_send_a_custom_autosupport_message_after_add_nodes_to_the_mcc_configuration.html"
    - title: Verifying switchover, healing, and switchback
      url: "/upgrade/task_verify_switchover_heal_and_switchback.html"
  - title: Expanding a four-node MetroCluster IP configuration to an eight-node configuration
    url: "/upgrade/task_expand_a_four_node_mcc_ip_configuration.html"
  - title: Removing a Disaster Recovery group
    url: "/upgrade/concept_removing_a_disaster_recovery_group.html"
  - title: Where to find additional information
    url: "/upgrade/reference_where_to_find_additional_information_mcc_ug.html"
